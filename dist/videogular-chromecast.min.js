"use strict";angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,d,e,f){a.API=f,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(f.toggleCasting=function(){return f.casting?a.stopCasting():a.doLaunch()},f.casting=!1,f.castInitialized=!1,f.canCast=!1,f.playPause=function(){f.casting&&a.paused||!f.casting&&f.mediaElement[0].paused?a.play():a.pause()},a.metadata={title:e.title,description:e.description},f.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.removeClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?f.canCast=!0:void 0},a.onInitSuccess=function(){return f.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),f.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,e,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return e=new chrome.cast.media.LoadRequest(g),e.autoplay=!0,e.currentTime=f.currentTime/1e3,a.apiSession.loadMedia(e,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),f.pause(),f.casting=!0,a.paused="pause"===f.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onChangeState=function(a){if(f.casting)switch(a){case b.PLAY:break;case b.PAUSE:break;case b.STOP:}},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,f.seekTime(a.currentMediaTime/1e3),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return f.setState(b.PAUSE),f.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return f.setState(b.PLAY),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia?a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0:void f.play()},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void f.pause()},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,e;if(a.apiMedia)return e=new chrome.cast.Volume,e.level=b,e.muted=c,a.currentVolume=e.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=e,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),f.vgUpdateVolume(e)},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,void f.seekTime(a.currentMediaTime/1e3)):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),f.casting=!1,a.removeClass("connected"),f.changeSource(f.sources),a.paused?(f.seekTime(a.currentMediaTime/1e3),a.apiMedia=null,a.apiSession=null):f.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType_=null,a.currentType=function(b){return void 0!==b&&(a.currentType_=b),a.currentType_},a.$watch(function(){return f.currentState},function(b,c){b!=c&&a.onChangeState(b)}),a.$watch(function(){return f.sources},function(b){a.currentSrc(b[0].src),a.currentType(b[0].type)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType_=null,a.currentType=function(b){return void 0!==b&&(a.currentType_=b),a.currentType_},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src),a.currentType(b[0].type)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType_=null,a.currentType=function(b){return void 0!==b&&(a.currentType_=b),a.currentType_},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src),a.currentType(b[0].type)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),
a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;

for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch();

},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),f=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){f.metadata=new chrome.cast.media.GenericMediaMetadata,h=a.metadata;for(c in h)g=h[c],f.metadata[c]=g}return d=new chrome.cast.media.LoadRequest(f),d.autoplay=!0,d.currentTime=e.currentTime,a.apiSession.loadMedia(d,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),f=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){f.metadata=new chrome.cast.media.GenericMediaMetadata,h=a.metadata;for(c in h)g=h[c],f.metadata[c]=g}return d=new chrome.cast.media.LoadRequest(f),d.autoplay=!0,d.currentTime=e.currentTime,a.apiSession.loadMedia(d,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),f=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){f.metadata=new chrome.cast.media.GenericMediaMetadata,h=a.metadata;for(c in h)g=h[c],f.metadata[c]=g}return d=new chrome.cast.media.LoadRequest(f),d.autoplay=!0,d.currentTime=e.currentTime,a.apiSession.loadMedia(d,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>');

}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]),angular.module("com.benjipott.videogular.plugins.chromecast",[]).directive("vgChromecast",["$timeout","VG_STATES","VG_UTILS","$sce",function(a,b,c){return{restrict:"A",require:"^videogular",link:function(a,b,d,e){a.API=e,c.isChrome=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("Chrome")},c.isChrome()&&(e.toggleCasting=function(){return a.isCasting?a.stopCasting():a.doLaunch()},e.isCasting=!1,e.castInitialized=!1,e.canCast=!1,a.metadata={title:d.title,description:d.description},e.isConfig&&a.$watch("API.config",function(){a.API.config&&(a.metadata.poster=a.API.config.plugins.poster.url)}),a.addClass=function(){},a.initializeApi=function(){var b,c,d;return chrome.cast&&chrome.cast.isAvailable?(console.log("Cast APIs are available"),c=a.vgChromecast||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,d=new chrome.cast.SessionRequest(c),b=new chrome.cast.ApiConfig(d,a.sessionJoinedListener,a.receiverListener.bind(a)),void chrome.cast.initialize(b,a.onInitSuccess.bind(a),a.castError)):(console.log("Cast APIs not available. Retrying..."),void setTimeout(a.initializeApi.bind(a),1e3))},a.sessionJoinedListener=function(){return console.log("Session joined")},a.receiverListener=function(a){return"available"===a?e.canCast=!0:void 0},a.onInitSuccess=function(){return e.castInitialized=!0},a.castError=function(a){return console.log("Cast Error: "+JSON.stringify(a))},a.doLaunch=function(){return console.log("Cast video: "+a.currentSrc()),e.castInitialized?chrome.cast.requestSession(a.onSessionSuccess.bind(a),a.castError):console.log("Session not initialized")},a.onSessionSuccess=function(b){var c,d,f,g,h,i;if(console.log("Session initialized: "+b.sessionId),a.apiSession=b,a.addClass("connected"),g=new chrome.cast.media.MediaInfo(a.currentSrc(),a.currentType()),a.metadata){g.metadata=new chrome.cast.media.GenericMediaMetadata,i=a.metadata;for(d in i)h=i[d],g.metadata[d]=h;a.metadata.poster&&(c=new chrome.cast.Image(a.metadata.poster),g.metadata.images=[c])}return f=new chrome.cast.media.LoadRequest(g),f.autoplay=!0,f.currentTime=e.currentTime,a.apiSession.loadMedia(f,a.onMediaDiscovered.bind(a),a.castError),a.apiSession.addUpdateListener(a.onSessionUpdate.bind(a))},a.onMediaDiscovered=function(b){return a.apiMedia=b,a.apiMedia.addUpdateListener(a.onMediaStatusUpdate.bind(a)),a.startProgressTimer(a.incrementMediaTime.bind(a)),a.casting=!0,a.paused="pause"===e.currentState,!0},a.onSessionUpdate=function(b){return a.apiMedia?b?void 0:a.onStopAppSuccess():void 0},a.onMediaStatusUpdate=function(){if(a.apiMedia)switch(a.currentMediaTime=a.apiMedia.currentTime,a.apiMedia.playerState){case chrome.cast.media.PlayerState.IDLE:return a.currentMediaTime=0,a.trigger("timeupdate"),a.onStopAppSuccess();case chrome.cast.media.PlayerState.PAUSED:if(a.paused)return;return e.pause(),a.paused=!0;case chrome.cast.media.PlayerState.PLAYING:if(!a.paused)return;return e.play(),a.paused=!1}},a.startProgressTimer=function(b){return a.timer&&(clearInterval(a.timer),a.timer=null),a.timer=setInterval(b.bind(a),a.timerStep)},a.play=function(){return a.apiMedia&&a.paused?(a.apiMedia.play(null,a.mediaCommandSuccessCallback.bind(a,"Playing: "+a.apiMedia.sessionId),a.onError),a.paused=!1):void 0},a.pause=function(){return a.apiMedia?a.paused?void 0:(a.apiMedia.pause(null,a.mediaCommandSuccessCallback.bind(a,"Paused: "+a.apiMedia.sessionId),a.onError),a.paused=!0):void 0},a.seekMedia=function(b){var c;return c=new chrome.cast.media.SeekRequest,c.currentTime=b,c.resumeState=chrome.cast.media.ResumeState.PLAYBACK_START,a.apiMedia.seek(c,a.onSeekSuccess.bind(a,b),a.onError)},a.onSeekSuccess=function(b){return a.currentMediaTime=b},a.setMediaVolume=function(b,c){var d,f;return a.apiMedia?(f=new chrome.cast.Volume,f.level=b,f.muted=c,a.currentVolume=f.level,a.muted=c,d=new chrome.cast.media.VolumeRequest,d.volume=f,a.apiMedia.setVolume(d,a.mediaCommandSuccessCallback.bind(a,"Volume changed"),a.onError),e.vgUpdateVolume(f)):void 0},a.incrementMediaTime=function(){return a.apiMedia.playerState===chrome.cast.media.PlayerState.PLAYING?a.currentMediaTime<a.apiMedia.media.duration?(a.currentMediaTime+=1,a.trigger("timeupdate")):(a.currentMediaTime=0,clearInterval(a.timer)):void 0},a.mediaCommandSuccessCallback=function(a){return console.log(a)},a.onError=function(){return console.log("error")},a.stopCasting=function(){return a.apiSession.stop(a.onStopAppSuccess.bind(a),a.onError)},a.onStopAppSuccess=function(){return clearInterval(a.timer),a.casting=!1,a.removeClass("connected"),e.changeSource(e.sources),a.paused?(a.apiMedia=null,a.apiSession=null):e.play()},a.currentSrc_=null,a.currentSrc=function(b){return void 0!==b&&(a.currentSrc_=b),a.currentSrc_},a.currentType=function(){return"video/mp4"},a.$watch(function(){return e.sources},function(b){a.currentSrc(b[0].src)}),a.initializeApi())}}}]),angular.module("com.benjipott.videogular.plugins.chromecast").run(["$templateCache",function(a){a.put("vg-templates/vg-chromecast-button",'<button class="iconButton" ng-click="onClickCast()" ng-class="chromecastIcon" aria-label="Toggle chromecast" type="button"> </button>')}]).directive("vgChromecastButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(a,b){return b.vgTemplate||"vg-templates/vg-chromecast-button"},link:function(a,b,c,d){a.onChangeCasting=function(b){a.chromecastIcon={enter:b,exit:!b}},a.onClickCast=function(){d.toggleCasting()},a.chromecastIcon={enter:!1},a.$watch(function(){return d.castInitialized&&d.canCast},function(b,c){b!=c&&a.onChangeCasting(b)})}}}]);